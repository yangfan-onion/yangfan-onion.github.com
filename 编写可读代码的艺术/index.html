<!DOCTYPE html>
<html>
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="The Man Who Can&#39;t Be Moved!">
    <title>The Man Who Can&#39;t Be Moved! - 编写可读代码的艺术</title>
    <meta name="author" content="yangfan.onion">
    <meta name="description" content="The Man Who Can&#39;t Be Moved!">
    <link rel="icon" href="/assets/images/null">
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="atom.xml">
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
</head>

    <body>
        <div id="blog">
            <header id="header">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars "></i>
    <h1 class="header-title">
        <a class="header-title-link" href="http://yangfan-onion.github.io">The Man Who Can&#39;t Be Moved!</a>
    </h1>
    
        <a class="header-picture-link" href="/#about">
            <img class="header-picture" src="/assets/images/avatar.jpg"/>
        </a>
    
</header>
            <nav id="sidebar">
    
        <div class="sidebar-profile">
            <a href="/#about">
                
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.jpg"/>
                
            </a>
            <span class="sidebar-profile-name hide-md">yangfan.onion</span>
        </div>
    
    
        <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc hide-md">Home</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/all-categories">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc hide-md">Categories</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/all-tags">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc hide-md">Tags</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/all-archives">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc hide-md">Archives</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/#about">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc hide-md">About me</span>
                    </a>
                </li>
            
        </ul>
    
        <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="https://github.com/yangfan-onion" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc hide-md">GitHub</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="https://www.facebook.com/onionloveorange" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-facebook"></i>
                        <span class="sidebar-button-desc hide-md">Facebook</span>
                    </a>
                </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.iomailto:yangfan.onion@gmail.com">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-envelope-o"></i>
                        <span class="sidebar-button-desc hide-md">Mail</span>
                    </a>
                </li>
            
        </ul>
    
        <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link" href="http://yangfan-onion.github.io/atom.xml">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                        <span class="sidebar-button-desc hide-md">RSS</span>
                    </a>
                </li>
            
        </ul>
    
</nav>
            <div id="main">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
        <div class="post-header main-content-wrap">
    
        <h1 class="post-title" itemprop="headline">编写可读代码的艺术</h1>
    
    <div class="post-meta">
    <time  itemprop="datePublished" content="Thu Jan 11 2018 15:56:09 GMT+0800">
        Jan 11, 2018
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Code/">Code</a>


    
</div>
</div>
    
    <div class="post-content markdown main-content-wrap" itemprop="articleBody">
        <h2 id="一、表面层次的改进">一、表面层次的改进</h2><h4 id="1-_把信息装到名字里">1. 把信息装到名字里</h4><h5 id="（1）选择专业的词">（1）选择专业的词</h5><p>清晰和精确比装可爱好。</p>
<table>
<thead>
<tr>
<th>单词</th>
<th>更多选择</th>
</tr>
</thead>
<tbody>
<tr>
<td>Get</td>
<td>Fetch, Download</td>
</tr>
<tr>
<td>Stop</td>
<td>Kill, Pause</td>
</tr>
<tr>
<td>Send</td>
<td>Deliver, Dispatch, Announce, Distribute, Route</td>
</tr>
<tr>
<td>Find</td>
<td>Search, Extract, Locate, Recover</td>
</tr>
<tr>
<td>Start</td>
<td>Launch, Create, Begin, Open</td>
</tr>
<tr>
<td>Make</td>
<td>Create, SetUp, Build, Generate, Compose, Add, New</td>
</tr>
</tbody>
</table>
<h5 id="（2）避免使用像tmp和retval这样泛泛的名字">（2）避免使用像tmp和retval这样泛泛的名字</h5><p>retval这个名字没有包含很多信息，用一个描述该变量的值的名字来代替它。<br>tmp这个名字只应用于短期存在且临时性为其主要存在因素的变量。<br>如果你要使用像tmp、it或者retval这样空泛的名字，那么你要有个好的理由。</p>
<p>我们的返回值经常有 $result, $data这样的值</p>
<h5 id="（3）用具体的名字代替抽象的名字">（3）用具体的名字代替抽象的名字</h5><p>在给变量、函数或者其他元素命名时，要把它描述得更具体而不是更抽象。</p>
<h5 id="（4）为名字附带更多信息">（4）为名字附带更多信息</h5><p>如果你的变量是一个度量的话（如时间长度或者字节数），那么最好把名字带上它的单位。</p>
<table>
<thead>
<tr>
<th>函数参数</th>
<th>带单位的参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start(int delay)</td>
<td>delay -&gt; delay_secs</td>
</tr>
<tr>
<td>CreateCache(int size)</td>
<td>size -&gt; size_mb</td>
</tr>
<tr>
<td>ThrottleDownload(float limit)</td>
<td>limit -&gt; max_kbps</td>
</tr>
<tr>
<td>Rotate(float angle)</td>
<td>angle -&gt; degrees_cw</td>
</tr>
</tbody>
</table>
<p>在对于这个变量存在危险或者意外的任何时候你也该采用它。</p>
<table>
<thead>
<tr>
<th>情形</th>
<th>变量名</th>
<th>更好的名字</th>
</tr>
</thead>
<tbody>
<tr>
<td>一个“纯文本”格式的密码，需要加密后才能进一步使用</td>
<td>password</td>
<td>plaintext_password</td>
</tr>
<tr>
<td>一条用户提供的注释，需要转义之后才能用于显示</td>
<td>comment</td>
<td>unescaped_comment</td>
</tr>
<tr>
<td>已转化为UTF-8格式的html字节</td>
<td>html</td>
<td>html_utf8</td>
</tr>
<tr>
<td>以“url方式编码”的输入数据</td>
<td>data</td>
<td>data_urlenc</td>
</tr>
</tbody>
</table>
<h5 id="（5）名字应该有多长">（5）名字应该有多长</h5><p>在小的作用域里可以使用短的名字，如果一个标识符有较大的作用域，那么它的名字就要包含足够的信息以便含义更清楚。对于首字母缩略词和缩写，使用项目所特有的缩写词非常糟糕。<br>经验原则是：团队的新成员是否能理解这个名字的含义。<br>丢掉没用的词：有时名字中的某些单词可以拿掉而不会损失任何信息。</p>
<p>我们的变量命名最典型的是 _ __ ,硬盘没有那么值钱，所以把变量名写全。</p>
<h5 id="（6）利用名字的格式来传递含义">（6）利用名字的格式来传递含义</h5><p>项目中使用一致的命名规范，使得对于下划线、连字符和大小写的使用方式也可以把更多的信息装到名字中。</p>
<h4 id="2-_不会误解的名字">2. 不会误解的名字</h4><p>要多问自己几遍：“这个名字会被别人解读成其他的意义吗？”<br>与使用者的期望相匹配<br>用min和max来表示（包含）极限<br>用first和last来表示包含的范围<br>用begin和end来表示包含/排除范围<br>使用is和has这样的词来明确表示它是布尔值，避免使用反义的词</p>
<p>我们的变量名：$booRollback; 根据这个值，不能清楚判断是否需要回滚<br>我们的方法名：hide_menu_show() 又是hide,又是show, 完全不知道啥意思； getGoodsALl()以为这个方法是获取商品信息，拿到返回值，结果这是一个set</p>
<p><img src="1.png" alt="1.png"></p>
<h4 id="3-_审美">3. 审美</h4><h5 id="（1）三条原则">（1）三条原则</h5><ul>
<li>使用一致的布局，让读者很快就习惯这种风格</li>
<li>让相似的代码看上去相似</li>
<li>把相关的代码行分组，形成代码块</li>
</ul>
<h5 id="（2）方法">（2）方法</h5><ul>
<li>在需要时使用列对齐</li>
<li>把代码分成“段落”</li>
<li>一致的风格比“正确”的风格更重要</li>
</ul>
<h2 id="二、简化循环和逻辑">二、简化循环和逻辑</h2><h4 id="(1)-_把控制流变得易读">(1). 把控制流变得易读</h4><ul>
<li>默认情况下都用if/else，三目运算符?:只有在最简单的情况下使用。</li>
<li>从函数中提前返回</li>
<li>最小化嵌套</li>
</ul>
<pre><code><span class="keyword">if</span>(<span class="variable">$foo</span> == <span class="number">1</span>){
    xxxx
    xxxx
    xxxx
    xxxx
}<span class="keyword">else</span>{
    return <span class="number">1</span>;
}
yyyyyyy
yyyyyyy



<span class="keyword">if</span>(<span class="variable">$foo</span> != <span class="number">1</span>){
    return <span class="number">1</span>;
}

xxxx
xxxx
xxxx

yyyyyyy
yyyyyyy
</code></pre><h4 id="2-_拆分超长的表达式">2. 拆分超长的表达式</h4><h5 id="（1）用作解释的变量">（1）用作解释的变量</h5><p>拆分表达式最简单的方法就是引入一个额外的变量，让它来表示一个小一点的子表达式：</p>
<h4 id="3-_变量与可读性">3. 变量与可读性</h4><h5 id="（1）缩小变量的作用域">（1）缩小变量的作用域</h5><p>让你的代码对尽量少的代码行可见</p>
<ul>
<li>把大的类拆分成小一些的类，并且这些类之间相互独立</li>
<li>大文件拆分成小文件，大函数拆分成小函数</li>
<li>“尽量使方法变成静态的”，静态方法是让读者知道“这几行代码与那些变量无关”的好办法</li>
<li>把定义向下移，把每个定义移到它的使用之前</li>
</ul>
<p>我们的方法2K多行，一个变量可能是在最开始申明的</p>
<h5 id="（2）只写一次的变量更好">（2）只写一次的变量更好</h5><p>操作一个变量的地方越多，越难确定它的当前值</p>
<p>2K多行的方法，我们的$arrMap变量还从头用到尾,不断赋值，不断unset</p>
<h2 id="三、重新组织代码">三、重新组织代码</h2><ul>
<li>抽取不相关的子问题</li>
<li>一次只做一件事</li>
<li>把想法变成代码</li>
</ul>

        
            
        
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/clean-code/">clean code</a> <a class="tag tag--primary tag--small t-link" href="/tags/variable-name-principle/">variable name principle</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/程序员的理-养-财-老-计划/" data-tooltip="程序员的理财（养老）计划">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" href="#disqus_thread">
                <i class="fa fa-comment-o"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'yangfan-onion';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        
    </div>
    <div class="post-bottom-bar">
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/程序员的理-养-财-老-计划/" data-tooltip="程序员的理财（养老）计划">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://yangfan-onion.github.io/编写可读代码的艺术/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" href="#disqus_thread">
                <i class="fa fa-comment-o"></i>
            </a>
        </li>
    </ul>
</div>


    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2018 yangfan.onion. All Rights Reserved.
    </span>
</footer>

            </div>
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.jpg"/>
        
            <h4 id="about-card-name">yangfan.onion</h4>
        
            <h5 id="about-card-bio">人生太短, 只爱脚本语言, orz..</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                编程, 吃东西
            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                四川-成都
            </h5>
        
    </div>
</div>
        <div id="cover" style="background-image:url('/assets/images/cover.png');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'yangfan-onion';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>


</html>